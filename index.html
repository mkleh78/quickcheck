<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Altersvorsorge-Check für Selbständige</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Lucide Icons -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/lucide/0.263.1/umd/lucide.js"></script>
    <style>
        .tooltip {
            position: absolute;
            z-index: 10;
            background-color: #001d6c;
            color: white;
            padding: 0.5rem;
            border-radius: 0.25rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 16rem;
            display: none;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="max-w-4xl mx-auto p-4">
        <div style="background-color: #001d6c" class="text-white p-6 mb-8 rounded-lg">
            <h1 class="text-3xl font-bold mb-2">Altersvorsorge-Check für Selbständige</h1>
            <p class="text-lg">Machen Sie eine Bestandsaufnahme Ihrer Altersvorsorge und erhalten Sie individuelle Empfehlungen</p>
        </div>

        <div id="formContainer" class="bg-white p-6 rounded-lg shadow-md">
            <div class="mb-8">
                <div class="flex items-center justify-between mb-2">
                    <span class="text-sm font-medium">Fortschritt</span>
                    <span id="progressPercent" class="text-sm font-medium">0%</span>
                </div>
                <div class="w-full bg-gray-200 rounded-full h-2.5">
                    <div id="progressBar" class="bg-blue-900 h-2.5 rounded-full" style="width: 0%"></div>
                </div>
            </div>

            <h2 id="stepTitle" class="text-2xl font-bold mb-6 text-blue-900">1. Bestehende Altersvorsorge prüfen</h2>

            <form id="vorsorgeForm">
                <!-- Step 1: Altersvorsorge -->
                <div id="step0" class="step-container">
                    <!-- Gesetzliche Rentenversicherung -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center cursor-pointer bg-blue-50 p-3 rounded-lg mb-2" 
                             onclick="toggleSection('gesetzlich')">
                            <h3 class="font-bold text-blue-900 flex items-center">
                                <i data-lucide="building" class="mr-2" width="20" height="20"></i>
                                Gesetzliche Rentenversicherung
                            </h3>
                            <i id="gesetzlich-icon" data-lucide="chevron-up" width="20" height="20"></i>
                        </div>
                        
                        <div id="gesetzlich-section" class="p-4 border border-gray-200 rounded-lg">
                            <div class="mb-4">
                                <div class="flex items-center mb-1">
                                    <label class="block text-gray-700 font-medium" for="versicherungsArt">
                                        Art der Versicherung
                                    </label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('versicherungsArt', true)" 
                                           onmouseleave="toggleTooltip('versicherungsArt', false)"></i>
                                        <div id="tooltip-versicherungsArt" class="tooltip">
                                            Gibt an, ob Sie in die gesetzliche Rentenversicherung einzahlen und in welcher Form.
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <select id="versicherungsArt" name="versicherungsArt" 
                                            class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-transparent">
                                        <option value="">Bitte wählen</option>
                                        <option value="Pflichtversichert">Pflichtversichert</option>
                                        <option value="Freiwillig versichert">Freiwillig versichert</option>
                                        <option value="Nicht versichert">Nicht versichert</option>
                                    </select>
                                    <div id="error-versicherungsArt" class="text-red-500 text-xs mt-1 flex items-center hidden">
                                        <i data-lucide="alert-circle" class="mr-1" width="12" height="12"></i>
                                        <span>Bitte wählen Sie die Art der Versicherung aus</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Pflichtversichert = z.B. als Handwerker, freiwillig = eigene Einzahlung, nicht versichert = keine Beiträge</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center mb-1">
                                    <label class="block text-gray-700 font-medium" for="rentenHöhe">
                                        Bisher erworbene Rente (€/Monat)
                                    </label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('rentenHöhe', true)" 
                                           onmouseleave="toggleTooltip('rentenHöhe', false)"></i>
                                        <div id="tooltip-rentenHöhe" class="tooltip">
                                            Die bisher von Ihnen erworbene monatliche Rente laut Ihrer Renteninformation der Deutschen Rentenversicherung.
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <input type="number" id="rentenHöhe" name="rentenHöhe" placeholder="0" min="0" step="10"
                                           class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-transparent">
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Zu finden in Ihrer Renteninformation der DRV</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="freiwilligeEinzahlung" name="freiwilligeEinzahlung"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="freiwilligeEinzahlung" class="text-gray-700">Freiwillige Einzahlung in Betracht gezogen</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('freiwilligeEinzahlung', true)" 
                                           onmouseleave="toggleTooltip('freiwilligeEinzahlung', false)"></i>
                                        <div id="tooltip-freiwilligeEinzahlung" class="tooltip">
                                            Selbständige können freiwillig in die gesetzliche Rentenversicherung einzahlen, um Rentenansprüche zu erwerben.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Private Altersvorsorge -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center cursor-pointer bg-blue-50 p-3 rounded-lg mb-2" 
                             onclick="toggleSection('privat')">
                            <h3 class="font-bold text-blue-900 flex items-center">
                                <i data-lucide="circle-dollar-sign" class="mr-2" width="20" height="20"></i>
                                Private Altersvorsorge
                            </h3>
                            <i id="privat-icon" data-lucide="chevron-down" width="20" height="20"></i>
                        </div>
                        
                        <div id="privat-section" class="p-4 border border-gray-200 rounded-lg hidden">
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="privateRente" name="privateRente"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2" 
                                        onchange="togglePrivateRenteFields()">
                                    <label for="privateRente" class="text-gray-700">Private Rentenversicherung vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('privateRente', true)" 
                                           onmouseleave="toggleTooltip('privateRente', false)"></i>
                                        <div id="tooltip-privateRente" class="tooltip">
                                            Private Rentenversicherungen sind Vorsorgeverträge, die eine lebenslange Rente im Alter garantieren.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="privateRenteFields" class="hidden">
                                <div class="mb-4">
                                    <div class="flex items-center mb-1">
                                        <label class="block text-gray-700 font-medium" for="privateRenteVerzinsung">
                                            Garantierte Verzinsung (%)
                                        </label>
                                        <div class="relative ml-2">
                                            <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                               onmouseenter="toggleTooltip('privateRenteVerzinsung', true)" 
                                               onmouseleave="toggleTooltip('privateRenteVerzinsung', false)"></i>
                                            <div id="tooltip-privateRenteVerzinsung" class="tooltip">
                                                Der garantierte Zinssatz, mit dem Ihr Kapital in der privaten Rentenversicherung verzinst wird.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <input type="number" id="privateRenteVerzinsung" name="privateRenteVerzinsung" placeholder="0" min="0" step="0.1"
                                               class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-transparent">
                                        <div id="error-privateRenteVerzinsung" class="text-red-500 text-xs mt-1 flex items-center hidden">
                                            <i data-lucide="alert-circle" class="mr-1" width="12" height="12"></i>
                                            <span>Bitte geben Sie einen gültigen Prozentsatz ein</span>
                                        </div>
                                    </div>
                                    <p class="text-sm text-gray-500 mt-1">Der in Ihrem Vertrag garantierte Zinssatz (meist zwischen 0,25% und 3,5%)</p>
                                </div>
                                
                                <div class="mb-4">
                                    <div class="flex items-center mb-1">
                                        <label class="block text-gray-700 font-medium" for="privateRenteKosten">
                                            Jährliche Kosten (%)
                                        </label>
                                        <div class="relative ml-2">
                                            <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                               onmouseenter="toggleTooltip('privateRenteKosten', true)" 
                                               onmouseleave="toggleTooltip('privateRenteKosten', false)"></i>
                                            <div id="tooltip-privateRenteKosten" class="tooltip">
                                                Die jährlichen Verwaltungs- und Abschlusskosten der privaten Rentenversicherung in Prozent.
                                            </div>
                                        </div>
                                    </div>
                                    
                                    <div>
                                        <input type="number" id="privateRenteKosten" name="privateRenteKosten" placeholder="0" min="0" step="0.1"
                                               class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-transparent">
                                    </div>
                                    <p class="text-sm text-gray-500 mt-1">Gesamtkosten inkl. Abschluss- und Verwaltungskosten (meist zwischen 1,5% und 3%)</p>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="etfSparpläne" name="etfSparpläne"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2"
                                        onchange="toggleEtfFields()">
                                    <label for="etfSparpläne" class="text-gray-700">ETF-/Fonds-Sparpläne vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('etfSparpläne', true)" 
                                           onmouseleave="toggleTooltip('etfSparpläne', false)"></i>
                                        <div id="tooltip-etfSparpläne" class="tooltip">
                                            ETF-Sparpläne investieren regelmäßig in börsengehandelte Indexfonds und bieten Renditechancen bei höherem Risiko.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="etfFields" class="mb-4 hidden">
                                <div class="flex items-center mb-1">
                                    <label class="block text-gray-700 font-medium" for="etfSparplanBetrag">
                                        Monatlicher Sparbetrag (€)
                                    </label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('etfSparplanBetrag', true)" 
                                           onmouseleave="toggleTooltip('etfSparplanBetrag', false)"></i>
                                        <div id="tooltip-etfSparplanBetrag" class="tooltip">
                                            Der monatliche Betrag, den Sie in ETF- oder Fondssparpläne investieren.
                                        </div>
                                    </div>
                                </div>
                                
                                <div>
                                    <input type="number" id="etfSparplanBetrag" name="etfSparplanBetrag" placeholder="0" min="0" step="10"
                                           class="w-full px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-900 focus:border-transparent">
                                    <div id="error-etfSparplanBetrag" class="text-red-500 text-xs mt-1 flex items-center hidden">
                                        <i data-lucide="alert-circle" class="mr-1" width="12" height="12"></i>
                                        <span>Bitte geben Sie einen gültigen Betrag ein</span>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Gesamtbetrag aller regelmäßigen Sparplanraten</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="rürupRente" name="rürupRente"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="rürupRente" class="text-gray-700">Rürup-Rente (Basisrente) vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('rürupRente', true)" 
                                           onmouseleave="toggleTooltip('rürupRente', false)"></i>
                                        <div id="tooltip-rürupRente" class="tooltip">
                                            Die Basisrente (Rürup) ist eine staatlich geförderte private Altersvorsorge für Selbständige mit steuerlichen Vorteilen.
                                        </div>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="riesterRente" name="riesterRente"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="riesterRente" class="text-gray-700">Riester-Rente vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('riesterRente', true)" 
                                           onmouseleave="toggleTooltip('riesterRente', false)"></i>
                                        <div id="tooltip-riesterRente" class="tooltip">
                                            Die Riester-Rente ist eine staatlich geförderte private Altersvorsorge mit Zulagen und Steuervorteilen.
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Betriebliche Altersvorsorge -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center cursor-pointer bg-blue-50 p-3 rounded-lg mb-2" 
                             onclick="toggleSection('betrieblich')">
                            <h3 class="font-bold text-blue-900 flex items-center">
                                <i data-lucide="building" class="mr-2" width="20" height="20"></i>
                                Betriebliche Altersvorsorge
                            </h3>
                            <i id="betrieblich-icon" data-lucide="chevron-down" width="20" height="20"></i>
                        </div>
                        
                        <div id="betrieblich-section" class="p-4 border border-gray-200 rounded-lg hidden">
                            <p class="text-sm text-gray-600 mb-4">Falls relevant für Ihre Situation als Selbständige/r:</p>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="direktversicherung" name="direktversicherung"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="direktversicherung" class="text-gray-700">Direktversicherung über eigene Firma</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('direktversicherung', true)" 
                                           onmouseleave="toggleTooltip('direktversicherung', false)"></i>
                                        <div id="tooltip-direktversicherung" class="tooltip">
                                            Eine Direktversicherung ist eine betriebliche Altersvorsorge, die der Arbeitgeber für den Arbeitnehmer abschließt.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Eine Lebensversicherung, die über Ihre GmbH oder UG abgeschlossen wurde</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="unterstützungskasse" name="unterstützungskasse"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="unterstützungskasse" class="text-gray-700">Unterstützungskasse über eigene Firma</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('unterstützungskasse', true)" 
                                           onmouseleave="toggleTooltip('unterstützungskasse', false)"></i>
                                        <div id="tooltip-unterstützungskasse" class="tooltip">
                                            Die Unterstützungskasse ist eine Form der betrieblichen Altersvorsorge für Geschäftsführer oder leitende Angestellte.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Eine Versorgungseinrichtung für Geschäftsführer oder leitende Angestellte</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="pensionskasse" name="pensionskasse"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="pensionskasse" class="text-gray-700">Pensionskasse</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('pensionskasse', true)" 
                                           onmouseleave="toggleTooltip('pensionskasse', false)"></i>
                                        <div id="tooltip-pensionskasse" class="tooltip">
                                            Eine Pensionskasse ist ein Versorgungswerk, das Betriebsrenten für die Mitarbeiter von Unternehmen verwaltet.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Mitglied in einer branchenspezifischen Pensionskasse</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="versorgungswerk" name="versorgungswerk"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2">
                                    <label for="versorgungswerk" class="text-gray-700">Versorgungswerk</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('versorgungswerk', true)" 
                                           onmouseleave="toggleTooltip('versorgungswerk', false)"></i>
                                        <div id="tooltip-versorgungswerk" class="tooltip">
                                            Versorgungswerke sind berufsständische Organisationen, die die Altersvorsorge für bestimmte Berufsgruppen übernehmen.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Mitglied in einem berufsständischen Versorgungswerk (z.B. für Ärzte, Rechtsanwälte)</p>
                            </div>
                        </div>
                    </div>

                    <!-- Immobilien als Altersvorsorge -->
                    <div class="mb-6">
                        <div class="flex justify-between items-center cursor-pointer bg-blue-50 p-3 rounded-lg mb-2" 
                             onclick="toggleSection('immobilien')">
                            <h3 class="font-bold text-blue-900 flex items-center">
                                <i data-lucide="home" class="mr-2" width="20" height="20"></i>
                                Immobilien als Altersvorsorge
                            </h3>
                            <i id="immobilien-icon" data-lucide="chevron-down" width="20" height="20"></i>
                        </div>
                        
                        <div id="immobilien-section" class="p-4 border border-gray-200 rounded-lg hidden">
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="wohneigentum" name="wohneigentum"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2"
                                        onchange="toggleImmobilienFields()">
                                    <label for="wohneigentum" class="text-gray-700">Selbstgenutztes Wohneigentum vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('wohneigentum', true)" 
                                           onmouseleave="toggleTooltip('wohneigentum', false)"></i>
                                        <div id="tooltip-wohneigentum" class="tooltip">
                                            Selbstgenutztes Wohneigentum kann im Alter für Mietersparnis sorgen und das verfügbare Einkommen erhöhen.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Eigene Immobilie, in der Sie selbst wohnen</p>
                            </div>
                            
                            <div class="mb-4">
                                <div class="flex items-center">
                                    <input type="checkbox" id="vermietet" name="vermietet"
                                        class="h-4 w-4 text-blue-900 border-gray-300 rounded mr-2"
                                        onchange="toggleImmobilienFields(); toggleMietrenditeFields();">
                                    <label for="vermietet" class="text-gray-700">Vermietete Immobilien vorhanden</label>
                                    <div class="relative ml-2">
                                        <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                           onmouseenter="toggleTooltip('vermietet', true)" 
                                           onmouseleave="toggleTooltip('vermietet', false)"></i>
                                        <div id="tooltip-vermietet" class="tooltip">
                                            Vermietete Immobilien können im Alter einen zusätzlichen Einkommensstrom generieren.
                                        </div>
                                    </div>
                                </div>
                                <p class="text-sm text-gray-500 mt-1 ml-6">Immobilien, die Sie zur Kapitalanlage vermieten</p>
                            </div>
                            
                            <div id="immobilienFields" class="hidden">
                                <div class="mb-4">
                                    <div class="flex items-center mb-1">
                                        <label class="block text-gray-700 font-medium" for="immobilienWert">
                                            Geschätzter Gesamtwert der Immobilien (€)
                                        </label>
                                        <div class="relative ml-2">
                                            <i data-lucide="help-circle" class="text-blue-900 cursor-help" width="16" height="16"
                                               onmouseenter="toggleTooltip('immobilienWert', true)" 
                                               onmouseleave="toggleToolt
